
<html lang="en">
<head>
	<meta charset=utf-8>
	<title>Testing</title>
	
    <link rel="stylesheet" href="style.css" />
</head>

<h1> <font color="white">Aerial Robotix Reporting tool </h1>

<body>
   <div id="message"></div>

   <h2> <input type="file" accept="video/*"/> </h2>
    
    <video controls autoplay></video>

    <canvas width="364" height="204"></canvas>

    <button id="snap" onclick="snap()">Take screenshot</button>

    <!-- Drop down menu --> 
    <select id="Criteria1">
	  <option selected>Condition</option>
	  <option>Score</option>
	  <option>Repair</option>
	  <option>Fix</option>
	</select>

	<!-- Input box --> 
	<h3>
    	<div>
    	<textarea name="textarea" style="width:250px;height:50px;"></textarea>
    	</div>
    </h3>



    <!-- Javascript that handles uploading and playing video -->
	<script>
	//Playing the video 
    var URL = window.URL || window.webkitURL
	var playSelectedFile = function (event){
		var file = this.files[0]
		var videoNode = document.querySelector('video')
		var fileURL = URL.createObjectURL(file)
		videoNode.src = fileURL
	}
    
	var inputNode = document.querySelector('input')
	inputNode.addEventListener('change', playSelectedFile, false)

	// Handling size of video 
	var canvas = document.querySelector('canvas')
	var videoNode = document.querySelector('video')
	var context = canvas.getContext('2d');
	videoNode.setAttribute('height', '350')
	videoNode.setAttribute('width', '600')
    
	//Handline size of screenshot canvas
	var w, h, ratio;
		
	// Add a listener to wait for the 'loadedmetadata' state so the video's dimensions can be read
	videoNode.addEventListener('loadedmetadata', function() {
		// Calculate the ratio of the video's width to height
		ratio = 600/350;//videoNode.videoWidth / videoNode.videoHeight;
		// Define the required width as 100 pixels smaller than the actual video's width
		w = 600 - 100;//w - 100
		// Calculate the height based on the video's width and the ratio
		h = parseInt(w / ratio, 10);
		// Set the canvas width and height to the values just calculated
		
		canvas.width = w;
		canvas.height = h;			
	}, false);


    // Takes a snapshot of the video
	function snap() {
		// Define the size of the rectangle that will be filled (basically the entire element)
		context.fillRect(0, 0, w, h);
		// Grab the image from the video
		context.drawImage(videoNode, 0, 0, w, h);
		var image = canvas.toDataURL("image/png");
		console.log("HEE");
		localStorage.setItem("videoNode", image);
		console.log("HEE");
		//var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");  // here is the most important part because if you dont replace you will get a DOM 18 exception.
		//window.location.href=image;
	}
	</script>




	<!-- Javascript that handles serialization with Python --> 
	<script> 
		var chosen_val = document.getElementById("Criteria1");
		var criteria_1 = chosen_val.options[chosen_val.selectedIndex].text;
		var ans_1 = document.getElementBy
	</script>

	   
    <footer>
		<small>&copy; copyright 2019, Aerial Robotix / developed by. Akwarandu Ugo Nwachuku / <a href="github.com/GermanInfinity">www.elephantsdream.org</a></small>
	</footer>
</body>
</html>